import org.apache.maven.shared.invoker.*;

import java.io.File;
import java.io.IOException;
import java.util.Arrays;
import java.util.List;

public class RunMaven {

    public static void main(String[] args) throws MavenInvocationException {
        System.out.println("run maven from java/kotlin");
        InvocationRequest request = new DefaultInvocationRequest();
//        request.setPomFile( new File( "/Users/vn513ct/IdeaProjects/VulnerabilityCheck/src/main/resources/ppfg-controller-0.0.69-20191218.205247-1.pom" ) );
//        request.setPomFile( new File( "/Users/vn513ct/IdeaProjects/VulnerabilityCheck/src/main/resources/ppfg-0.0.69-20191218.205232-1.pom" ) );
        request.setPomFile( new File( "/Users/vn513ct/IdeaProjects/VulnerabilityCheck/src/main/resources/pom.xml" ) );
        request.setGoals( Arrays.asList( "clean", "install" ) );
        request.setProfiles(List.of("owasp-dependency-check"));

        Invoker invoker = new DefaultInvoker();
        InvocationOutputHandler hand = new PrintStreamHandler() ;

        invoker.setOutputHandler(hand);
        invoker.setMavenHome(new File(System.getenv("M3_HOME")));
        InvocationResult invocationResult = invoker.execute(request);
        System.out.println(invocationResult);
    }
}
